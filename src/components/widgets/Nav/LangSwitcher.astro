---
import { getRelativeLocaleUrl } from "astro:i18n";

const { i18n = "es" } = Astro.params;

const url = Astro.url.pathname.slice(3);
---

<div class="relative">
  <select
    name="lang"
    data-id="lang-switcher"
    class="peer bg-zinc-200 dark:bg-zinc-800 rounded-md ps-1 pe-2 py-px"
  >
    <option
      value={getRelativeLocaleUrl("es", url)}
      selected={i18n === "es"}
      class="bg-zinc-100 dark:bg-zinc-950"
    >
      ES
    </option>
    <option
      value={getRelativeLocaleUrl("en", url)}
      selected={i18n === "en"}
      class="bg-zinc-100 dark:bg-zinc-950"
    >
      EN
    </option>
  </select>
  <span
    class="absolute inset-x-1 sm:peer-hover:opacity-100 opacity-0 -bottom-px h-px bg-linear-to-r from-teal-500/0 via-teal-500/40 to-teal-500/0 dark:from-teal-400/0 dark:via-teal-400/40 dark:to-teal-400/0"
  ></span>
</div>

<style>
  .option {
    width: 24rem;
  }
</style>

<script>
  import { LangSwitcher } from "@/lib/lang-switcher";

  document.addEventListener("astro:page-load", () => {
    new LangSwitcher();
  });
</script>
